<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Portfolio</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>
  <header>
    <h1>Gesang Project</h1>
    <p>Memories From A Simpler Time</p>
  </header>

  <section id="about">
    <h2>Description</h2>
    <p>Gesang, A Family Hard as Nails, Forged Through Time</p>
  </section>

  <section id="portfolio">
  <h2>Photos</h2>
  
  <!-- Gallery of images -->
  <div id="gallery"></div>

  <!-- Button to submit new image -->
  <div class="submit-button-container">
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSd-Hu_RK1mP7gv0yoHDI50V0CWlZ4sO_4ojTgevwC6hlS5lOQ/viewform?usp=dialog" target="_blank">
      <button class="submit-button">Submit Your Image</button>
    </a>
  </div>
  </section>

  <section id="contact">
    <h2>Contact Me</h2>
    <p>Email: jhiroasia@gmail.com</p>
    <p>Phone : (+62) 0813 6373 8105</p>
  </section>

  <footer>
    <p>Â© 2025 Gesang</p>
  </footer>

  <!-- Script to fetch images from Google Sheet -->
  <script>
  const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRv8H4afCZsXQ1w81-HFtRkalZFa1H_hqBt4DpQJb0bEJd5LZFEmnEX8sHBcO3Yr8VitBSqqk12V-Op/pub?output=csv";

  function convertDriveLink(url) {
    const match = url.match(/\/d\/(.*?)\//);
    if (match && match[1]) {
      return `https://drive.google.com/uc?export=view&id=${match[1]}`;
    }
    return url;
  }

  async function loadImages() {
    try {
      const res = await fetch(sheetUrl);
      const text = await res.text();
      const rows = text.split("\n").slice(1); // skip header row

      const gallery = document.getElementById("gallery");

      rows.forEach(row => {
        const cols = row.split(",");
        let url = cols[1]?.trim(); // 2nd column (B)
        if (url) {
          url = convertDriveLink(url);

          const img = document.createElement("img");
          img.src = url;
          img.loading = "lazy";

          img.onerror = () => {
            console.warn("Image failed to load:", url);
            img.remove();
          };

          gallery.appendChild(img);
          console.log("Loading image:", url);
        }
      });
    } catch (err) {
      console.error("Error loading images:", err);
    }
  }

  loadImages();
</script>


</body>
</html>
